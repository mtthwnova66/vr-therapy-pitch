<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Synaeon - AI-Powered VR Therapy</title>
  
  <meta name="description" content="Synaeon offers AI-powered VR therapy that transforms mental health treatment with real-time, adaptive, and clinically effective exposure therapy.">
  <meta name="keywords" content="VR therapy, AI therapy, exposure therapy, mental health, anxiety treatment, VR healthcare">
  <meta name="author" content="Synaeon">
  <meta property="og:title" content="Synaeon - AI-Powered VR Therapy">
  <meta property="og:description" content="Revolutionizing mental health treatment with AI-powered VR exposure therapy.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://synaeon.com/">
  <meta name="twitter:card" content="summary_large_image">
  
  <link rel="icon" type="image/png" href="syneon_image.png">
  <link rel="apple-touch-icon" href="syneon_image.png">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/DRACOLoader.js"></script>

  <style>
    /* Existing CSS remains mostly the same, but adjust blob styles for softness */
    .blob-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      pointer-events: none;
      background: radial-gradient(circle at center, rgba(71, 160, 255, 0.05), transparent 70%);
    }

    .blob {
      position: absolute;
      border-radius: 50%;
      filter: blur(60px); /* Softer blur */
      opacity: 0.3;
      animation: gentleWave 20s infinite ease-in-out;
      transition: all 0.5s ease;
    }

    @keyframes gentleWave {
      0%, 100% { transform: translate(0, 0) scale(1); }
      25% { transform: translate(30px, 20px) scale(1.05); }
      50% { transform: translate(0, 30px) scale(0.95); }
      75% { transform: translate(-30px, 20px) scale(1.02); }
    }

    /* Soften other elements for a therapeutic feel */
    :root {
      --primary: #47a0ff;
      --primary-dark: #3366cc;
      --primary-light: #a0c3ff;
      --primary-glow: rgba(71, 160, 255, 0.3);
      --accent: #ffcc66;
      --accent-light: #ffe6b3;
      --accent-ultra: #fff5e6;
      --accent-glow: rgba(255, 204, 102, 0.3);
      --success: #34c759;
      --neural-1: #ff99cc;
      --neural-2: #cc99ff;
      --neural-3: #99ffcc;
      --bg-dark: #020a1a;
      --card-bg: rgba(8, 15, 35, 0.7);
      --text-primary: #e0e0e0;
      --text-secondary: rgba(224, 224, 224, 0.8);
      --text-tertiary: rgba(224, 224, 224, 0.5);
      --border-light: rgba(224, 224, 224, 0.1);
      --gradient-overlay: radial-gradient(circle at center, rgba(71, 160, 255, 0.05), transparent 80%);
      --shadow-glow: 0 0 10px var(--primary-glow), 0 0 20px rgba(0, 0, 0, 0.2);
    }

    /* Soften shadows and glows throughout */
    .hero-inner, .feature-card, .team-card, .vr-demo {
      box-shadow: var(--shadow-glow);
      transition: transform 0.6s ease-in-out, box-shadow 0.6s ease-in-out;
    }

    /* Rest of the CSS remains the same but with softer transitions and colors */
  </style>
</head>

<body>
  <canvas id="global-blobCanvas"></canvas>
  <!-- Loading Screen and other HTML content remain unchanged -->
  <div id="loading-screen">
    <canvas id="loadingCanvas"></canvas>
    <div class="loading-overlay">
      <h1>Welcome to Synaeon</h1>
      <div id="loading-bar-container">
        <div id="loading-bar"></div>
      </div>
    </div>
  </div>
  
  <div class="main-content" style="display: none;">
    <!-- Existing HTML content (navbar, sections, footer, etc.) remains the same -->
  </div>

  <audio id="relaxingAudio" src="relaxing.mp3" loop></audio>

  <script>
    // Loading Screen Animation (unchanged for consistency)
    (function() {
      const canvas = document.getElementById('loadingCanvas');
      const renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(window.devicePixelRatio);
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.z = 3;
      const geometry = new THREE.IcosahedronGeometry(1, 2);
      const material = new THREE.MeshStandardMaterial({ color: 0x47a0ff, wireframe: true });
      const ball = new THREE.Mesh(geometry, material);
      scene.add(ball);
      const light = new THREE.PointLight(0xffffff, 0.8);
      light.position.set(5, 5, 5);
      scene.add(light);
      function animate() {
        requestAnimationFrame(animate);
        ball.rotation.x += 0.002;
        ball.rotation.y += 0.003;
        renderer.render(scene, camera);
      }
      animate();
      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });
    })();

    // Show loading bar and fade out (unchanged)
    window.addEventListener('load', function() {
      const loadingBar = document.getElementById('loading-bar');
      const loadingScreen = document.getElementById('loading-screen');
      const mainContent = document.querySelector('.main-content');
      const blobCanvas = document.getElementById('global-blobCanvas');
      
      loadingBar.style.width = '100%';
      setTimeout(function() {
        loadingScreen.style.opacity = '0';
        setTimeout(function() {
          loadingScreen.style.display = 'none';
          mainContent.style.display = 'block';
          blobCanvas.style.display = 'block';
        }, 500);
      }, 1200);
    });

    // Main initialization (unchanged except for blob animation)
    document.addEventListener('DOMContentLoaded', function() {
      const hamburger = document.getElementById('hamburger');
      const navLinks = document.getElementById('nav-links');
      
      hamburger.addEventListener('click', function() {
        navLinks.classList.toggle('active');
        hamburger.classList.toggle('active');
      });
      
      document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', function() {
          navLinks.classList.remove('active');
          hamburger.classList.remove('active');
        });
      });
      
      const navbar = document.getElementById('navbar');
      
      window.addEventListener('scroll', function() {
        if (window.scrollY > 50) {
          navbar.classList.add('scrolled');
        } else {
          navbar.classList.remove('scrolled');
        }
      });
      
      initBlobCanvas();

      // Contact Form Submission (unchanged)
      document.getElementById('contact-form').addEventListener('submit', async function(event) {
        event.preventDefault();
        const form = event.target;
        const formData = new FormData(form);
        const data = {
          name: formData.get('name'),
          email: formData.get('email'),
          message: formData.get('message'),
        };

        const messageElement = document.getElementById('form-message');
        messageElement.style.display = 'none';

        try {
          const response = await fetch('http://localhost:3000/send-email', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
          });

          const result = await response.json();
          if (response.ok) {
            messageElement.textContent = 'Message sent successfully!';
            messageElement.style.color = 'var(--success)';
            form.reset();
          } else {
            messageElement.textContent = result.error || 'Failed to send message.';
            messageElement.style.color = 'var(--neural-1)';
          }
        } catch (error) {
          messageElement.textContent = 'Error sending message. Please try again.';
          messageElement.style.color = 'var(--neural-1)';
        }

        messageElement.style.display = 'block';
      });
    });

    // Blob Canvas Animation with Gentle Waves and Rebirth Effect
    function initBlobCanvas() {
      const canvas = document.getElementById('global-blobCanvas');
      if (!canvas) return;

      const renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      renderer.shadowMap.enabled = true;

      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.z = 50; // Pull back for a broader view

      // Softer, therapeutic material
      const blobMaterial = new THREE.MeshPhysicalMaterial({
        color: 0xa0c3ff, // Light blue for calm
        metalness: 0.05,
        roughness: 0.7,
        clearcoat: 0.5,
        clearcoatRoughness: 0.3,
        transmission: 0.8, // More translucent for a flowing effect
        ior: 1.3,
        thickness: 0.8,
        transparent: true,
        opacity: 0.5,
        envMapIntensity: 0.5,
      });

      const particleMaterial = new THREE.PointsMaterial({
        color: 0xa0c3ff,
        size: 0.08,
        sizeAttenuation: true,
        transparent: true,
        opacity: 0.6,
        depthWrite: false,
      });

      // Wave function for smooth, natural motion
      function wave(x, y, z, time) {
        const frequency = 0.2; // Slower frequency for gentleness
        const amplitude = 2; // Smaller amplitude for subtle waves
        return amplitude * Math.sin(x * frequency + y * frequency + z * frequency + time);
      }

      const metaballs = [];
      const blobCount = 6; // Fewer blobs for a cleaner, more focused effect

      for (let i = 0; i < blobCount; i++) {
        const baseRadius = Math.random() * 4 + 3; // Slightly larger for prominence
        const geometry = new THREE.IcosahedronGeometry(baseRadius, 3); // Less subdivision for smoother shapes

        const mesh = new THREE.Mesh(geometry, blobMaterial.clone());
        mesh.position.x = (Math.random() - 0.5) * 60;
        mesh.position.y = (Math.random() - 0.5) * 60 + (i * (window.innerHeight / blobCount) * 0.7);
        mesh.position.z = (Math.random() - 0.5) * 50;
        mesh.velocity = { x: 0, y: 0.01, z: 0 }; // Slow, steady upward drift
        mesh.phase = Math.random() * Math.PI * 2; // Different starting points for waves

        // Particle trail for a flowing effect
        const particlesGeometry = new THREE.BufferGeometry();
        const particles = [];
        for (let k = 0; k < 30; k++) {
          particles.push(
            mesh.position.x + Math.random() * 1 - 0.5,
            mesh.position.y + Math.random() * 1 - 0.5,
            mesh.position.z + Math.random() * 1 - 0.5
          );
        }
        particlesGeometry.setAttribute('position', new THREE.Float32BufferAttribute(particles, 3));
        const particleSystem = new THREE.Points(particlesGeometry, particleMaterial);
        mesh.particles = particleSystem;
        scene.add(particleSystem);

        scene.add(mesh);
        metaballs.push({ mesh, targetRadius: baseRadius * (1 + Math.random() * 0.3) });
      }

      // Gentle lighting for a serene atmosphere
      const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
      scene.add(ambientLight);

      const softLight = new THREE.DirectionalLight(0xffffff, 0.4);
      softLight.position.set(10, 20, 15);
      scene.add(softLight);

      const glowLight = new THREE.PointLight(0xffcc66, 0.3, 100);
      glowLight.position.set(0, 20, 0);
      scene.add(glowLight);

      const clock = new THREE.Clock();
      let mouseX = 0, mouseY = 0;

      window.addEventListener('mousemove', (event) => {
        mouseX = (event.clientX / window.innerWidth) * 2 - 1;
        mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
      });

      function animate() {
        requestAnimationFrame(animate);
        const elapsed = clock.getElapsedTime();

        metaballs.forEach(({ mesh, targetRadius }) => {
          // Gentle wave-like motion
          const waveOffset = wave(mesh.position.x, mesh.position.y, mesh.position.z, elapsed + mesh.phase);
          mesh.position.y += mesh.velocity.y + waveOffset * 0.1; // Subtle vertical drift
          mesh.position.x += waveOffset * 0.05; // Side-to-side sway

          // Keep within bounds softly
          const boundary = 70;
          if (Math.abs(mesh.position.x) > boundary) mesh.position.x *= 0.95;
          if (Math.abs(mesh.position.y) > boundary) mesh.position.y *= 0.95;
          if (Math.abs(mesh.position.z) > boundary) mesh.position.z *= 0.95;

          // Pulsing and reshaping
          let currentRadius = mesh.scale.x;
          const pulseSpeed = 0.005;
          const targetScale = 1 + Math.sin(elapsed * 0.5 + mesh.phase) * 0.1; // Gentle pulsing
          currentRadius += (targetScale - currentRadius) * pulseSpeed;
          mesh.scale.set(currentRadius, currentRadius, currentRadius);

          // Subtle rotation for a flowing feel
          mesh.rotation.y += 0.001 * Math.sin(elapsed * 0.3); // Slow, smooth rotation

          // Update particle trail with a flowing effect
          const positions = mesh.particles.geometry.attributes.position.array;
          for (let i = 0; i < positions.length; i += 3) {
            positions[i] += (mesh.position.x - positions[i]) * 0.02;
            positions[i + 1] += (mesh.position.y - positions[i + 1]) * 0.02;
            positions[i + 2] += (mesh.position.z - positions[i + 2]) * 0.02;
          }
          mesh.particles.geometry.attributes.position.needsUpdate = true;

          // Subtle mouse interaction for guidance
          const dx = mouseX * 30 - mesh.position.x;
          const dy = mouseY * 30 - mesh.position.y;
          mesh.position.x += dx * 0.0005; // Very subtle pull
          mesh.position.y += dy * 0.0005;
        });

        // Smooth camera movement
        camera.position.x += (mouseX * 10 - camera.position.x) * 0.005;
        camera.position.y += (-mouseY * 10 - camera.position.y) * 0.005;
        camera.lookAt(scene.position);

        renderer.render(scene, camera);
      }

      animate();

      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });
    }

    // Demo Level Toggle and Sound Toggle (unchanged)
    function showLevel(level) {
      const level1 = document.getElementById('arachnophobia-demo');
      const level2 = document.getElementById('arachnophobia-level2');
      const level1Btn = document.getElementById('level1-btn');
      const level2Btn = document.getElementById('level2-btn');

      level1.style.display = level === 'level1' ? 'block' : 'none';
      level2.style.display = level === 'level2' ? 'block' : 'none';

      if (level === 'level1') {
        level1Btn.classList.remove('btn-outline');
        level2Btn.classList.add('btn-outline');

        if (typeof initLevel1 === 'function') {
          initLevel1();
          const renderer = level1.querySelector('canvas') ? level1.querySelector('canvas').renderer : new THREE.WebGLRenderer({ canvas: level1 });
          renderer.setSize(level1.clientWidth, level1.clientHeight);
          renderer.setPixelRatio(window.devicePixelRatio);
          level1.appendChild(renderer.domElement);
        } else {
          console.log('initLevel1 not found, initializing default renderer');
          const renderer = new THREE.WebGLRenderer({ canvas: level1 });
          renderer.setSize(level1.clientWidth, level1.clientHeight);
          renderer.setPixelRatio(window.devicePixelRatio);
        }
      } else {
        level2Btn.classList.remove('btn-outline');
        level1Btn.classList.add('btn-outline');

        if (typeof initLevel2 === 'function') {
          initLevel2();
          const renderer = level2.querySelector('canvas') ? level2.querySelector('canvas').renderer : new THREE.WebGLRenderer({ canvas: level2 });
          renderer.setSize(level2.clientWidth, level2.clientHeight);
          renderer.setPixelRatio(window.devicePixelRatio);
          level2.appendChild(renderer.domElement);
        } else {
          console.log('initLevel2 not found, initializing default renderer');
          const renderer = new THREE.WebGLRenderer({ canvas: level2 });
          renderer.setSize(level2.clientWidth, level2.clientHeight);
          renderer.setPixelRatio(window.devicePixelRatio);
        }
      }

      window.addEventListener('resize', () => {
        if (level1.style.display === 'block' && level1.querySelector('canvas')) {
          const renderer = level1.querySelector('canvas').renderer;
          renderer.setSize(level1.clientWidth, level1.clientHeight);
        } else if (level2.style.display === 'block' && level2.querySelector('canvas')) {
          const renderer = level2.querySelector('canvas').renderer;
          renderer.setSize(level2.clientWidth, level2.clientHeight);
        }
      }, { passive: true });
    }

    let isPlaying = false;

    function toggleSound() {
      const audio = document.getElementById('relaxingAudio');
      const button = document.getElementById('soundToggleBtn');

      if (isPlaying) {
        audio.pause();
        button.textContent = 'Turn On Relaxing Sound';
      } else {
        audio.play();
        button.textContent = 'Turn Off Relaxing Sound';
      }

      isPlaying = !isPlaying;
    }
  </script>
  <script src="main.js"></script>
  <script src="main_level2.js"></script>
</body>
</html>
